# Maintainer: pingplug <pingplug@foxmail.com>
# Contributor: Levente Polyak <anthraxx[at]archlinux[dot]org>
# Contributor: Giovanni Scafora <giovanni@archlinux.org>
# Contributor: Tom Newsom <Jeepster@gmx.co.uk>

pkgname=ccache-ext
pkgver=1
pkgrel=1
pkgdesc='more compiler links for ccache'
arch=('any')
license=('custom')
depends=('ccache')
source=('nvcc-ccache'
        'update-ccache-links'
        'update-ccache-links.hook')
sha256sums=('c6db8aaddb625d28050e67122d3b1bf50d1e1e8d6a04cdca3dc195521b53f3c4'
            '9b6944d277f3739aa305f1809c56b940f060cb505fb57baf5102ec190ba43c27'
            '4152050e2c354763f5121eb6494f95b2e9b0418e5379a52d2b553683a9b78460')

package() {
  install -d "${pkgdir}/usr/lib/ccache/bin"
  # CUDA
  if pacman -T "cuda" ; then
    # /usr/lib/ccache/bin/nvcc cauese CMake failed to find CUDA
    install -Dm755 nvcc-ccache "${pkgdir}/usr/lib/ccache/bin/"
  fi
  install -d "${pkgdir}/usr/bin"
  install -Dm755 update-ccache-links "${pkgdir}/usr/bin/"
  install -d "${pkgdir}/usr/share/libalpm/hooks"
  install -Dm644 update-ccache-links.hook "${pkgdir}/usr/share/libalpm/hooks/"
}

# vim: ts=2 sw=2 et:
